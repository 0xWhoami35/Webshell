<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Text to File</title>
</head>
<body>
    <h1>Add Text to File</h1>
    <form method="post">
        <label for="directory">Directory Path:</label><br>
        <input type="text" id="directory" name="directory" required><br>
        <label for="filename">Filename:</label><br>
        <input type="text" id="filename" name="filename" required><br>
        <label for="newtext">New Text:</label><br>
        <textarea id="newtext" name="newtext" rows="4" cols="50" required></textarea><br>
        <input type="submit" value="Add Text">
    </form>

    <?php
    // Handle form submission
    if ($_SERVER['REQUEST_METHOD'] == 'POST') {
        // Validate inputs
        $directory = isset($_POST['directory']) ? $_POST['directory'] : '';
        $filename = isset($_POST['filename']) ? $_POST['filename'] : '';
        $newtext = isset($_POST['newtext']) ? $_POST['newtext'] : '';

        if (!empty($directory) && !empty($filename) && !empty($newtext)) {
            // Construct the file path
            $filepath = rtrim($directory, '/') . '/' . $filename;

            // Check if the file exists
            if (file_exists($filepath)) {
                // Read the current content of the file
                $fileContent = file_get_contents($filepath);

                // Prepend the new text to the existing content
                $updatedContent = $newtext . $fileContent;

                // Write the updated content back to the file
                file_put_contents($filepath, $updatedContent);

                // Display a success message
                echo "<p>Text added to file successfully.</p>";
            } else {
                echo "<p>File does not exist: $filepath</p>";
            }
        } else {
            echo "<p>Please fill out all fields.</p>";
        }
    }
    ?>
</body>
</html>
